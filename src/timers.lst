GAS LISTING /tmp/ccqimk3h.s 			page 1


   1               		.file	"timers.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/mnt/c/Users/dmh/Documents/AVR/ER-Firmware/ER-Firmware/src/",100,0,2,.Ltext0
   8               		.stabs	"timers.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"__int128:t(0,6)=@s128;r(0,6);02000000000000000000000000000000000000000000;0177777777777777
  18               		.stabs	"__int128 unsigned:t(0,7)=@s128;r(0,7);0;03777777777777777777777777777777777777777777;",128
  19               		.stabs	"long long int:t(0,8)=@s64;r(0,8);01000000000000000000000;00777777777777777777777;",128,0,0
  20               		.stabs	"long long unsigned int:t(0,9)=@s64;r(0,9);0;01777777777777777777777;",128,0,0,0
  21               		.stabs	"short int:t(0,10)=r(0,10);-32768;32767;",128,0,0,0
  22               		.stabs	"short unsigned int:t(0,11)=r(0,11);0;0177777;",128,0,0,0
  23               		.stabs	"signed char:t(0,12)=@s8;r(0,12);-128;127;",128,0,0,0
  24               		.stabs	"unsigned char:t(0,13)=@s8;r(0,13);0;255;",128,0,0,0
  25               		.stabs	"float:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"double:t(0,15)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"long double:t(0,16)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"short _Fract:t(0,17)=r(0,1);1;0;",128,0,0,0
  29               		.stabs	"_Fract:t(0,18)=r(0,1);2;0;",128,0,0,0
  30               		.stabs	"long _Fract:t(0,19)=r(0,1);4;0;",128,0,0,0
  31               		.stabs	"long long _Fract:t(0,20)=r(0,1);8;0;",128,0,0,0
  32               		.stabs	"unsigned short _Fract:t(0,21)=r(0,1);1;0;",128,0,0,0
  33               		.stabs	"unsigned _Fract:t(0,22)=r(0,1);2;0;",128,0,0,0
  34               		.stabs	"unsigned long _Fract:t(0,23)=r(0,1);4;0;",128,0,0,0
  35               		.stabs	"unsigned long long _Fract:t(0,24)=r(0,1);8;0;",128,0,0,0
  36               		.stabs	"_Sat short _Fract:t(0,25)=r(0,1);1;0;",128,0,0,0
  37               		.stabs	"_Sat _Fract:t(0,26)=r(0,1);2;0;",128,0,0,0
  38               		.stabs	"_Sat long _Fract:t(0,27)=r(0,1);4;0;",128,0,0,0
  39               		.stabs	"_Sat long long _Fract:t(0,28)=r(0,1);8;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned short _Fract:t(0,29)=r(0,1);1;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned _Fract:t(0,30)=r(0,1);2;0;",128,0,0,0
  42               		.stabs	"_Sat unsigned long _Fract:t(0,31)=r(0,1);4;0;",128,0,0,0
  43               		.stabs	"_Sat unsigned long long _Fract:t(0,32)=r(0,1);8;0;",128,0,0,0
  44               		.stabs	"short _Accum:t(0,33)=r(0,1);2;0;",128,0,0,0
  45               		.stabs	"_Accum:t(0,34)=r(0,1);4;0;",128,0,0,0
  46               		.stabs	"long _Accum:t(0,35)=r(0,1);8;0;",128,0,0,0
  47               		.stabs	"long long _Accum:t(0,36)=r(0,1);8;0;",128,0,0,0
  48               		.stabs	"unsigned short _Accum:t(0,37)=r(0,1);2;0;",128,0,0,0
  49               		.stabs	"unsigned _Accum:t(0,38)=r(0,1);4;0;",128,0,0,0
  50               		.stabs	"unsigned long _Accum:t(0,39)=r(0,1);8;0;",128,0,0,0
  51               		.stabs	"unsigned long long _Accum:t(0,40)=r(0,1);8;0;",128,0,0,0
  52               		.stabs	"_Sat short _Accum:t(0,41)=r(0,1);2;0;",128,0,0,0
  53               		.stabs	"_Sat _Accum:t(0,42)=r(0,1);4;0;",128,0,0,0
  54               		.stabs	"_Sat long _Accum:t(0,43)=r(0,1);8;0;",128,0,0,0
  55               		.stabs	"_Sat long long _Accum:t(0,44)=r(0,1);8;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned short _Accum:t(0,45)=r(0,1);2;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned _Accum:t(0,46)=r(0,1);4;0;",128,0,0,0
GAS LISTING /tmp/ccqimk3h.s 			page 2


  58               		.stabs	"_Sat unsigned long _Accum:t(0,47)=r(0,1);8;0;",128,0,0,0
  59               		.stabs	"_Sat unsigned long long _Accum:t(0,48)=r(0,1);8;0;",128,0,0,0
  60               		.stabs	"void:t(0,49)=(0,49)",128,0,0,0
  61               		.stabs	"/usr/lib/avr/include/util/atomic.h",130,0,0,0
  62               		.stabs	"/usr/lib/avr/include/avr/io.h",130,0,0,0
  63               		.stabs	"/usr/lib/avr/include/avr/sfr_defs.h",130,0,0,0
  64               		.stabs	"/usr/lib/avr/include/inttypes.h",130,0,0,0
  65               		.stabs	"/usr/lib/gcc/avr/5.4.0/include/stdint.h",130,0,0,0
  66               		.stabs	"/usr/lib/avr/include/stdint.h",130,0,0,0
  67               		.stabs	"int8_t:t(6,1)=(0,12)",128,0,125,0
  68               		.stabs	"uint8_t:t(6,2)=(0,13)",128,0,126,0
  69               		.stabs	"int16_t:t(6,3)=(0,1)",128,0,127,0
  70               		.stabs	"uint16_t:t(6,4)=(0,4)",128,0,128,0
  71               		.stabs	"int32_t:t(6,5)=(0,3)",128,0,129,0
  72               		.stabs	"uint32_t:t(6,6)=(0,5)",128,0,130,0
  73               		.stabs	"int64_t:t(6,7)=(0,8)",128,0,132,0
  74               		.stabs	"uint64_t:t(6,8)=(0,9)",128,0,133,0
  75               		.stabs	"intptr_t:t(6,9)=(6,3)",128,0,146,0
  76               		.stabs	"uintptr_t:t(6,10)=(6,4)",128,0,151,0
  77               		.stabs	"int_least8_t:t(6,11)=(6,1)",128,0,163,0
  78               		.stabs	"uint_least8_t:t(6,12)=(6,2)",128,0,168,0
  79               		.stabs	"int_least16_t:t(6,13)=(6,3)",128,0,173,0
  80               		.stabs	"uint_least16_t:t(6,14)=(6,4)",128,0,178,0
  81               		.stabs	"int_least32_t:t(6,15)=(6,5)",128,0,183,0
  82               		.stabs	"uint_least32_t:t(6,16)=(6,6)",128,0,188,0
  83               		.stabs	"int_least64_t:t(6,17)=(6,7)",128,0,196,0
  84               		.stabs	"uint_least64_t:t(6,18)=(6,8)",128,0,203,0
  85               		.stabs	"int_fast8_t:t(6,19)=(6,1)",128,0,217,0
  86               		.stabs	"uint_fast8_t:t(6,20)=(6,2)",128,0,222,0
  87               		.stabs	"int_fast16_t:t(6,21)=(6,3)",128,0,227,0
  88               		.stabs	"uint_fast16_t:t(6,22)=(6,4)",128,0,232,0
  89               		.stabs	"int_fast32_t:t(6,23)=(6,5)",128,0,237,0
  90               		.stabs	"uint_fast32_t:t(6,24)=(6,6)",128,0,242,0
  91               		.stabs	"int_fast64_t:t(6,25)=(6,7)",128,0,250,0
  92               		.stabs	"uint_fast64_t:t(6,26)=(6,8)",128,0,257,0
  93               		.stabs	"intmax_t:t(6,27)=(6,7)",128,0,277,0
  94               		.stabs	"uintmax_t:t(6,28)=(6,8)",128,0,282,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"int_farptr_t:t(4,1)=(6,5)",128,0,77,0
  98               		.stabs	"uint_farptr_t:t(4,2)=(6,6)",128,0,81,0
  99               		.stabn	162,0,0,0
 100               		.stabn	162,0,0,0
 101               		.stabs	"/usr/lib/avr/include/avr/fuse.h",130,0,0,0
 102               		.stabs	"__fuse_t:t(7,1)=(7,2)=s3low:(0,13),0,8;high:(0,13),8,8;extended:(0,13),16,8;;",128,0,244,0
 103               		.stabn	162,0,0,0
 104               		.stabn	162,0,0,0
 105               		.stabn	162,0,0,0
 106               		.stabs	"interrupts.h",130,0,0,0
 107               		.stabs	"main.h",130,0,0,0
 108               		.stabs	"/usr/lib/avr/include/avr/pgmspace.h",130,0,0,0
 109               		.stabs	"/usr/lib/gcc/avr/5.4.0/include/stddef.h",130,0,0,0
 110               		.stabs	"size_t:t(11,1)=(0,4)",128,0,216,0
 111               		.stabn	162,0,0,0
 112               		.stabn	162,0,0,0
 113               		.stabs	"door.h",130,0,0,0
 114               		.stabs	"Door:t(12,1)=(12,2)=s7toggle_mode:(12,3)=@s8;-16;,0,8;toggled:(12,3),8,8;is_active:(12,3),
GAS LISTING /tmp/ccqimk3h.s 			page 3


 115               		.stabn	162,0,0,0
 116               		.stabs	"ui8:t(9,1)=(6,2)",128,0,261,0
 117               		.stabs	"byte:t(9,2)=(6,2)",128,0,262,0
 118               		.stabs	"Inputs:t(9,3)=(9,4)=s3mode:(9,5)=B(12,3),0,8;prev_values:(9,6)=B(9,1),8,8;retracting:(9,5)
 119               		.stabs	"DoorMode:T(9,7)=@s8;eModeDependent:0,ModeIndependent:1,;",128,0,0,0
 120               		.stabs	"OutputMode:T(9,8)=@s8;eActiveLow:0,ActiveHigh:1,;",128,0,0,0
 121               		.stabs	"ToggleMode:T(9,9)=@s8;eToggleOff:0,ToggleOn:1,;",128,0,0,0
 122               		.stabs	"RotaryPositions:T(9,10)=@s8;eposition0:0,position1:1,position2:2,position3:3,position4:4,p
 123               		.stabs	"DelayTime:T(9,11)=@s8;edelay_1s:1,delay_2s:2,delay_3s:3,delay_5s:5,delay_7s:7,delay_10s:10
 124               		.stabn	162,0,0,0
 125               		.stabn	162,0,0,0
 126               		.stabs	"getTime:F(0,5)",36,0,39,getTime
 127               		.stabs	"pin:P(6,2)",64,0,39,18
 128               	.global	getTime
 129               		.type	getTime, @function
 130               	getTime:
 131               		.stabd	46,0,0
   1:timers.c      **** /*
   2:timers.c      **** * timers.c --> Code for reading the timing selection switches
   3:timers.c      **** *
   4:timers.c      **** * Created: 11/14/2012 8:57 AM
   5:timers.c      **** * Modified: 8/4/2015 3:48 PM
   6:timers.c      **** * Author: DMH
   7:timers.c      **** *
   8:timers.c      **** */
   9:timers.c      **** 
  10:timers.c      **** #include <util/atomic.h>
  11:timers.c      **** #include "timers.h"
  12:timers.c      **** #include "interrupts.h"
  13:timers.c      **** #include "door.h"
  14:timers.c      **** 
  15:timers.c      **** volatile unsigned long timer0_millis;
  16:timers.c      **** volatile uint8_t timer0_fract;
  17:timers.c      **** 
  18:timers.c      **** // Array holding the 4-bit timing selection values (in seconds), Stored in PGM Memory
  19:timers.c      **** const ui8 PROGMEM timing_values_PGM[] = {
  20:timers.c      **** 	1,	// 0
  21:timers.c      **** 	2,	// 1
  22:timers.c      **** 	3,	// 2
  23:timers.c      **** 	5,	// 3
  24:timers.c      **** 	7,	// 4
  25:timers.c      **** 	10, // 5
  26:timers.c      **** 	15,	// 6
  27:timers.c      **** 	20,	// 7
  28:timers.c      **** 	25,	// 8
  29:timers.c      **** 	30, // 9
  30:timers.c      **** 	35, // A
  31:timers.c      **** 	40,	// B
  32:timers.c      **** 	45,	// C
  33:timers.c      **** 	50, // D
  34:timers.c      **** 	55,	// E
  35:timers.c      **** 	60, // F
  36:timers.c      **** };
  37:timers.c      **** 
  38:timers.c      **** // Reads the time selection switch port
  39:timers.c      **** unsigned long getTime(uint8_t pin)
  40:timers.c      **** {
GAS LISTING /tmp/ccqimk3h.s 			page 4


 132               		.stabn	68,0,40,.LM0-.LFBB1
 133               	.LM0:
 134               	.LFBB1:
 135               	/* prologue: function */
 136               	/* frame size = 0 */
 137               	/* stack size = 0 */
 138               	.L__stack_usage = 0
 139 0000 282F      		mov r18,r24
  41:timers.c      **** 	unsigned long t;
  42:timers.c      **** 	uint8_t ds_port_value;
  43:timers.c      **** 
  44:timers.c      **** 	// Set the DS Enable signal
  45:timers.c      **** 	if(pin==DR1_OUT)
 140               		.stabn	68,0,45,.LM1-.LFBB1
 141               	.LM1:
 142 0002 8111      		cpse r24,__zero_reg__
 143 0004 00C0      		rjmp .L2
  46:timers.c      **** 	{
  47:timers.c      **** 		sbi(DS_PORT, DS1_PIN);
 144               		.stabn	68,0,47,.LM2-.LFBB1
 145               	.LM2:
 146 0006 409A      		sbi 0x8,0
  48:timers.c      **** 		cbi(DS_PORT, DS2_PIN);
 147               		.stabn	68,0,48,.LM3-.LFBB1
 148               	.LM3:
 149 0008 4198      		cbi 0x8,1
 150 000a 00C0      		rjmp .L3
 151               	.L2:
  49:timers.c      **** 	} else {
  50:timers.c      **** 		sbi(DS_PORT, DS2_PIN);
 152               		.stabn	68,0,50,.LM4-.LFBB1
 153               	.LM4:
 154 000c 419A      		sbi 0x8,1
  51:timers.c      **** 		cbi(DS_PORT, DS1_PIN);
 155               		.stabn	68,0,51,.LM5-.LFBB1
 156               	.LM5:
 157 000e 4098      		cbi 0x8,0
 158               	.L3:
  52:timers.c      **** 	}
  53:timers.c      **** 	ds_port_value = (DS_PIN_PORT & 0x3c)>>2;
 159               		.stabn	68,0,53,.LM6-.LFBB1
 160               	.LM6:
 161 0010 E6B1      		in r30,0x6
 162               	.LBB2:
  54:timers.c      **** 	t = getTimingValue(ds_port_value);
 163               		.stabn	68,0,54,.LM7-.LFBB1
 164               	.LM7:
 165 0012 EC73      		andi r30,lo8(60)
 166 0014 F0E0      		ldi r31,0
 167 0016 F595      		asr r31
 168 0018 E795      		ror r30
 169 001a F595      		asr r31
 170 001c E795      		ror r30
 171 001e E050      		subi r30,lo8(-(timing_values_PGM))
 172 0020 F040      		sbci r31,hi8(-(timing_values_PGM))
 173               	/* #APP */
 174               	 ;  54 "timers.c" 1
GAS LISTING /tmp/ccqimk3h.s 			page 5


 175 0022 E491      		lpm r30, Z
 176               		
 177               	 ;  0 "" 2
 178               	/* #NOAPP */
 179               	.LBE2:
 180 0024 6E2F      		mov r22,r30
 181 0026 70E0      		ldi r23,0
 182 0028 80E0      		ldi r24,0
 183 002a 90E0      		ldi r25,0
  55:timers.c      **** 	(pin==DR1_OUT) ? cbi(DS_PORT, DS1_PIN) : cbi(DS_PORT, DS2_PIN);
 184               		.stabn	68,0,55,.LM8-.LFBB1
 185               	.LM8:
 186 002c 2111      		cpse r18,__zero_reg__
 187 002e 00C0      		rjmp .L4
 188               		.stabn	68,0,55,.LM9-.LFBB1
 189               	.LM9:
 190 0030 4098      		cbi 0x8,0
 191 0032 0895      		ret
 192               	.L4:
 193               		.stabn	68,0,55,.LM10-.LFBB1
 194               	.LM10:
 195 0034 4198      		cbi 0x8,1
  56:timers.c      **** 	return t;
  57:timers.c      **** }
 196               		.stabn	68,0,57,.LM11-.LFBB1
 197               	.LM11:
 198 0036 0895      		ret
 199               		.size	getTime, .-getTime
 200               		.stabs	"t:r(0,5)",64,0,41,22
 201               		.stabn	192,0,0,.LFBB1-.LFBB1
 202               		.stabn	224,0,0,.Lscope1-.LFBB1
 203               	.Lscope1:
 204               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 205               		.stabd	78,0,0
 206               		.stabs	"door_timer:F(0,5)",36,0,60,door_timer
 207               		.stabs	"reset:P(12,3)",64,0,60,24
 208               	.global	door_timer
 209               		.type	door_timer, @function
 210               	door_timer:
 211               		.stabd	46,0,0
  58:timers.c      **** 
  59:timers.c      **** //  Resets the timer or returns the time (ms) since the last reset
  60:timers.c      **** unsigned long door_timer(bool reset)
  61:timers.c      **** {
 212               		.stabn	68,0,61,.LM12-.LFBB2
 213               	.LM12:
 214               	.LFBB2:
 215               	/* prologue: function */
 216               	/* frame size = 0 */
 217               	/* stack size = 0 */
 218               	.L__stack_usage = 0
  62:timers.c      **** 	if(reset) 	// Reset the Door Timer and return
 219               		.stabn	68,0,62,.LM13-.LFBB2
 220               	.LM13:
 221 0038 8823      		tst r24
 222 003a 01F0      		breq .L8
  63:timers.c      **** 	{
GAS LISTING /tmp/ccqimk3h.s 			page 6


  64:timers.c      **** 		// ATOMIC_BLOCK(ATOMIC_RESTORESTATE)
  65:timers.c      **** 		// {
  66:timers.c      **** 			timer0_millis = 0;
 223               		.stabn	68,0,66,.LM14-.LFBB2
 224               	.LM14:
 225 003c 1092 0000 		sts timer0_millis,__zero_reg__
 226 0040 1092 0000 		sts timer0_millis+1,__zero_reg__
 227 0044 1092 0000 		sts timer0_millis+2,__zero_reg__
 228 0048 1092 0000 		sts timer0_millis+3,__zero_reg__
  67:timers.c      **** 			timer0_fract = 0;
 229               		.stabn	68,0,67,.LM15-.LFBB2
 230               	.LM15:
 231 004c 1092 0000 		sts timer0_fract,__zero_reg__
  68:timers.c      **** 		// }
  69:timers.c      **** 		return 0;
 232               		.stabn	68,0,69,.LM16-.LFBB2
 233               	.LM16:
 234 0050 60E0      		ldi r22,0
 235 0052 70E0      		ldi r23,0
 236 0054 CB01      		movw r24,r22
 237 0056 0895      		ret
 238               	.L8:
  70:timers.c      **** 	}
  71:timers.c      **** 
  72:timers.c      **** 	// Else, Return the time since last reset
  73:timers.c      **** 	unsigned long t;
  74:timers.c      **** 	// ATOMIC_BLOCK(ATOMIC_RESTORESTATE)
  75:timers.c      **** 	// {
  76:timers.c      **** 		t = timer0_millis;
 239               		.stabn	68,0,76,.LM17-.LFBB2
 240               	.LM17:
 241 0058 6091 0000 		lds r22,timer0_millis
 242 005c 7091 0000 		lds r23,timer0_millis+1
 243 0060 8091 0000 		lds r24,timer0_millis+2
 244 0064 9091 0000 		lds r25,timer0_millis+3
  77:timers.c      **** 	// }
  78:timers.c      **** 	return t;
  79:timers.c      **** }
 245               		.stabn	68,0,79,.LM18-.LFBB2
 246               	.LM18:
 247 0068 0895      		ret
 248               		.size	door_timer, .-door_timer
 249               	.Lscope2:
 250               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 251               		.stabd	78,0,0
 252               	.global	timing_values_PGM
 253               		.section	.progmem.data,"a",@progbits
 254               		.type	timing_values_PGM, @object
 255               		.size	timing_values_PGM, 16
 256               	timing_values_PGM:
 257 0000 01        		.byte	1
 258 0001 02        		.byte	2
 259 0002 03        		.byte	3
 260 0003 05        		.byte	5
 261 0004 07        		.byte	7
 262 0005 0A        		.byte	10
 263 0006 0F        		.byte	15
GAS LISTING /tmp/ccqimk3h.s 			page 7


 264 0007 14        		.byte	20
 265 0008 19        		.byte	25
 266 0009 1E        		.byte	30
 267 000a 23        		.byte	35
 268 000b 28        		.byte	40
 269 000c 2D        		.byte	45
 270 000d 32        		.byte	50
 271 000e 37        		.byte	55
 272 000f 3C        		.byte	60
 273               		.comm	timer0_fract,1,1
 274               		.comm	timer0_millis,4,1
 275               		.stabs	"timer0_millis:G(0,50)=B(0,5)",32,0,15,0
 276               		.stabs	"timer0_fract:G(12,6)",32,0,16,0
 277               		.stabs	"timing_values_PGM:G(0,51)=ar(0,52)=r(0,52);0;0177777;;0;15;(0,53)=k(9,1)",32,0,19,0
 278               		.text
 279               		.stabs	"",100,0,0,.Letext0
 280               	.Letext0:
 281               		.ident	"GCC: (GNU) 5.4.0"
 282               	.global __do_clear_bss
GAS LISTING /tmp/ccqimk3h.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 timers.c
     /tmp/ccqimk3h.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccqimk3h.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccqimk3h.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccqimk3h.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccqimk3h.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccqimk3h.s:130    .text:0000000000000000 getTime
     /tmp/ccqimk3h.s:256    .progmem.data:0000000000000000 timing_values_PGM
     /tmp/ccqimk3h.s:210    .text:0000000000000038 door_timer
                            *COM*:0000000000000004 timer0_millis
                            *COM*:0000000000000001 timer0_fract

UNDEFINED SYMBOLS
__do_clear_bss
